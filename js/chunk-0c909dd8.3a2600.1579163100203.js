(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0c909dd8"],{"139c":function(t,e,i){"use strict";var n=i("668c");i.n(n).a},"1f97":function(t,e,i){},"3e4b":function(t,e,i){},"668c":function(t,e,i){},7744:function(t,e,i){"use strict";var n=i("1988"),r=i("2638"),c=i.n(r),a=i("d282"),s=i("a142"),o=i("dfaf"),l=i("ba31"),u=i("48f4"),h=i("ad06"),d=Object(a.a)("cell"),f=d[0],p=d[1];function v(t,e,i,n){var r=e.icon,a=e.size,o=e.title,d=e.label,f=e.value,v=e.isLink,b=e.arrowDirection,m=i.title||Object(s.b)(o),g=i.default||Object(s.b)(f),y=(i.label||Object(s.b)(d))&&t("div",{class:[p("label"),e.labelClass]},[i.label?i.label():d]),x=m&&t("div",{class:[p("title"),e.titleClass],style:e.titleStyle},[i.title?i.title():t("span",[o]),y]),C=g&&t("div",{class:[p("value",{alone:!i.title&&!o}),e.valueClass]},[i.default?i.default():t("span",[f])]),k=i.icon?i.icon():r&&t(h.a,{class:p("left-icon"),attrs:{name:r}}),O=i["right-icon"],I=O?O():v&&t(h.a,{class:p("right-icon"),attrs:{name:b?"arrow-"+b:"arrow"}}),j=v||e.clickable,w={clickable:j,center:e.center,required:e.required,borderless:!e.border};return a&&(w[a]=a),t("div",c()([{class:p(w),attrs:{role:j?"button":null,tabindex:j?0:null},on:{click:function(t){Object(l.a)(n,"click",t),Object(u.a)(n)}}},Object(l.b)(n)]),[k,x,C,I,i.extra&&i.extra()])}v.props=Object(n.a)({},o.a,{},u.c),e.a=f(v)},9884:function(t,e,i){"use strict";i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return a}));var n=i("8bbf"),r=i.n(n);function c(t,e){var i,n;void 0===e&&(e={});var c=e.indexKey||"index";return r.a.extend({inject:(i={},i[t]={default:null},i),computed:(n={parent:function(){return this.disableBindRelation?null:this[t]}},n[c]=function(){return this.bindRelation(),this.parent.children.indexOf(this)},n),mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter((function(e){return e!==t})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]),e=function(t){var e=[];return function t(i){i.forEach((function(i){e.push(i),i.children&&t(i.children)}))}(t),e}(this.parent.slots());t.sort((function(t,i){return e.indexOf(t.$vnode)-e.indexOf(i.$vnode)})),this.parent.children=t}}}})}function a(t){return{provide:function(){var e;return(e={})[t]=this,e},data:function(){return{children:[]}}}}},bcdd:function(t,e,i){t.exports=i.p+"img/loading2.4d415bb5.gif"},bd4f:function(t,e,i){},c194:function(t,e,i){"use strict";i("68ef"),i("09fe")},c3a6:function(t,e,i){"use strict";i("68ef"),i("09fe")},dfaf:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n={icon:String,size:String,center:Boolean,isLink:Boolean,required:Boolean,clickable:Boolean,titleStyle:null,titleClass:null,valueClass:null,labelClass:null,title:[Number,String],value:[Number,String],label:[Number,String],arrowDirection:String,border:{type:Boolean,default:!0}}},f211:function(t,e,i){"use strict";var n=i("3e4b");i.n(n).a},f2da:function(t,e,i){"use strict";i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return s})),i("96cf");var n=i("3b8d"),r=i("4020");function c(){return a.apply(this,arguments)}function a(){return(a=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r.a)("/index/hotcities"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return o.apply(this,arguments)}function o(){return(o=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r.a)("/index/allcities"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},fbab:function(t,e,i){"use strict";i.r(e),i("e7e5");var n=i("d399"),r=(i("7f7f"),i("c3a6"),i("ad06")),c=(i("c194"),i("7744")),a=(i("68ef"),i("1f97"),i("d282")),s=i("9884"),o=i("b1d2"),l=Object(a.a)("index-anchor"),u=l[0],h=l[1],d=u({mixins:[Object(s.a)("vanIndexBar",{indexKey:"childrenIndex"})],props:{index:[Number,String]},data:function(){return{top:0,active:!1,position:"static"}},computed:{sticky:function(){return this.active&&this.parent.sticky},anchorStyle:function(){if(this.sticky)return{position:this.position,zIndex:""+this.parent.zIndex,transform:"translate3d(0, "+this.top+"px, 0)",color:this.parent.highlightColor}}},mounted:function(){this.height=this.$el.offsetHeight},methods:{scrollIntoView:function(){this.$el.scrollIntoView()}},render:function(t){var e,i=t,n=this.sticky;return i("div",{style:{height:n?this.height+"px":null}},[i("div",{style:this.anchorStyle,class:[h({sticky:n}),(e={},e[o.a]=n,e)]},[this.slots("default")||this.index])])}}),f=(i("bd4f"),i("3875")),p=i("5fbe"),v=i("1325"),b=i("a8c1"),m=Object(a.a)("index-bar"),g=m[0],y=m[1],x=g({mixins:[f.a,Object(s.b)("vanIndexBar"),Object(p.a)((function(t){this.scroller||(this.scroller=Object(b.c)(this.$el)),t(this.scroller,"scroll",this.onScroll)}))],props:{sticky:{type:Boolean,default:!0},zIndex:{type:Number,default:1},highlightColor:{type:String,default:o.g},stickyOffsetTop:{type:Number,default:0},indexList:{type:Array,default:function(){for(var t=[],e="A".charCodeAt(0),i=0;i<26;i++)t.push(String.fromCharCode(e+i));return t}}},data:function(){return{activeAnchorIndex:null}},computed:{highlightStyle:function(){var t=this.highlightColor;if(t)return{color:t}}},watch:{indexList:function(){this.$nextTick(this.onScroll)}},methods:{onScroll:function(){var t=this,e=Object(b.d)(this.scroller),i=this.getScrollerRect(),n=this.children.map((function(e){return{height:e.height,top:t.getElementTop(e.$el,i)}})),r=this.getActiveAnchorIndex(e,n);if(this.activeAnchorIndex=this.indexList[r],this.sticky){var c=0,a=!1;-1!==r&&(c=n[r].top-e,a=c<=0),this.children.forEach((function(e,n){n===r?(e.active=!0,e.position=a?"fixed":"relative",e.top=a?t.stickyOffsetTop+i.top:0):n===r-1?(e.active=!a,e.position="relative",e.top=e.$el.parentElement.offsetHeight-e.height):(e.active=!1,e.position="static")}))}},getScrollerRect:function(){var t=this.scroller,e={top:0,left:0};return t.getBoundingClientRect&&(e=t.getBoundingClientRect()),e},getElementTop:function(t,e){var i=this.scroller;return i===window||i===document.body?Object(b.a)(t):t.getBoundingClientRect().top-e.top+Object(b.d)(i)},getActiveAnchorIndex:function(t,e){for(var i=this.children.length-1;0<=i;i--)if(t+(0<i?e[i-1].height:0)+this.stickyOffsetTop>=e[i].top)return i;return-1},onClick:function(t){this.scrollToElement(t.target)},onTouchMove:function(t){if(this.touchMove(t),"vertical"===this.direction){Object(v.c)(t);var e=t.touches[0],i=e.clientX,n=e.clientY,r=document.elementFromPoint(i,n);if(r){var c=r.dataset.index;this.touchActiveIndex!==c&&(this.touchActiveIndex=c,this.scrollToElement(r))}}},scrollToElement:function(t){var e=t.dataset.index;if(e){var i=this.children.filter((function(t){return String(t.index)===e}));i[0]&&(i[0].scrollIntoView(),this.stickyOffsetTop&&Object(b.e)(Object(b.b)()-this.stickyOffsetTop),this.$emit("select",i[0].index))}},onTouchEnd:function(){this.active=null}},render:function(t){var e=this,i=t,n=this.indexList.map((function(t){var n=t===e.activeAnchorIndex;return i("span",{class:y("index",{active:n}),style:n?e.highlightStyle:null,attrs:{"data-index":t}},[t])}));return i("div",{class:y()},[i("div",{class:y("sidebar"),style:{zIndex:this.zIndex+1},on:{click:this.onClick,touchstart:this.touchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[n]),this.slots("default")])}}),C=i("f2da"),k=i("c24f"),O={name:"Loca",components:{IndexBar:x,IndexAnchor:d,Cell:c.a,Icon:r.a},data:function(){return{index:0,idx:0,citylist:[],cityclassify:[],child:"",indexList:[],itemlet:"",Navindex:"F",isCity:""}},computed:{getCity:function(){return this.$store.state.city},getPresent:function(){return this.$store.state.present}},mounted:function(){this.initLocation(),this.initProvincial(),this.$store.commit({type:"updatePresent",id:"",name:""}),window.$browser.WeChat?this.$getLocation(!1):window.initiaLocation(!1)},methods:{Pitchon:function(t){this.Navindex=t},Clickcity:function(t,e){this.userLog(t),this.idx=e,this.$store.commit({type:"handleInitCity",data:t}),this.$router.push("/home")},Clickage:function(t){this.userLog(t),this.$store.commit({type:"handleInitCity",data:t}),this.$router.push("/home")},handlePosition:function(t){if(!this.getPresent.name)return!1;var e={areaId:this.getPresent.id,areaName:this.getPresent.name};this.$store.commit({type:"handleInitCity",data:e}),this.userLog(e),this.$router.push("/home")},initLocation:function(){var t=this;Object(C.a)().then((function(e){if(1===e.state){t.citylist=e.data.results;for(var i=0;i<t.citylist.length;i++)if(t.citylist[i].areaName===t.getCity.name){t.idx=i;break}}}))},initProvincial:function(){var t=this;n.a.loading({duration:0,message:"加载中...",forbidClick:!0}),Object(C.b)().then((function(e){n.a.clear(),t.cityclassify=e.data;for(var i=0;i<t.cityclassify.length;i++)t.indexList.push(t.cityclassify[i].areaNameHead)}))},userLog:function(t){var e={actionCode:"click_city",actionName:"点击城市",actionRemark:"通过顶部点击城市的事件",actionType:"1",areaId:t.areaId};Object(k.t)(e).then((function(t){}))}}},I=(i("f211"),i("139c"),i("2877")),j=Object(I.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"content"}},[n("div",{staticClass:"location"},[n("div",{staticClass:"present"},[n("h2",{staticClass:"title"},[t._v("当前定位")]),n("div",{staticClass:"site",on:{click:t.handlePosition}},[n("Icon",{staticClass:"site-l",attrs:{name:"location-o"}}),n("div",{staticClass:"site-r"},[t._v("\n          "+t._s(t.getPresent.name)+"\n          "),""===t.getPresent.name?n("u",[n("img",{attrs:{src:i("bcdd"),alt:""}})]):t._e()])],1)]),n("div",{staticClass:"hot"},[n("h3",{staticClass:"hot-title"},[t._v("热门城市")]),n("div",{staticClass:"hot-nav"},t._l(t.citylist,(function(e,i){return n("div",{key:i,staticClass:"hot-city",class:t.idx==i?"active":" ",on:{click:function(n){return t.Clickcity(e,i)}}},[t._v(t._s(e.areaName))])})),0)])]),n("div",{staticClass:"city-nav"}),n("IndexBar",{attrs:{"highlight-color":"#07c160",indexList:t.indexList},on:{select:function(e){return t.Pitchon(t.index)}}},t._l(t.cityclassify,(function(e,i){return n("div",{key:i},[n("IndexAnchor",{attrs:{id:"city-title",index:t.indexList[i]}},[t._v(t._s(e.areaNameHead))]),t._l(e.areaList,(function(e,i){return n("Cell",{key:i,attrs:{title:e.areaName},on:{click:function(i){return t.Clickage(e)}}})}))],2)})),0)],1)}),[],!1,null,"cb7202a8",null);e.default=j.exports}}]);